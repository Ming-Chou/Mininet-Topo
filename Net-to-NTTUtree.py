from mininet.topo import Topo
from mininet.cli import CLI
from mininet.log import lg
from mininet.node import Node
from mininet.topolib import TreeNet
from mininet.node import RemoteController, OVSKernelSwitch
from mininet.net import Mininet


def startNAT( root, inetIntf='eth0', subnet='10.0/8' ):
    """Start NAT/forwarding between Mininet and external network
    root: node to access iptables from
    inetIntf: interface for internet access
    subnet: Mininet subnet (default 10.0/8)="""

    # Identify the interface connecting to the mininet network
    localIntf = root.defaultIntf()

    # Flush any currently active rules
    root.cmd( 'iptables -F' )
    root.cmd( 'iptables -t nat -F' )

    # Create default entries for unmatched traffic
    root.cmd( 'iptables -P INPUT ACCEPT' )
    root.cmd( 'iptables -P OUTPUT ACCEPT' )
    root.cmd( 'iptables -P FORWARD DROP' )

    # Configure NAT
    root.cmd( 'iptables -I FORWARD -i', localIntf, '-d', subnet, '-j DROP' )
    root.cmd( 'iptables -A FORWARD -i', localIntf, '-s', subnet, '-j ACCEPT' )
    root.cmd( 'iptables -A FORWARD -i', inetIntf, '-d', subnet, '-j ACCEPT' )
    root.cmd( 'iptables -t nat -A POSTROUTING -o ', inetIntf, '-j MASQUERADE' )

    # Instruct the kernel to perform forwarding
    root.cmd( 'sysctl net.ipv4.ip_forward=1' )

def stopNAT( root ):
    """Stop NAT/forwarding between Mininet and external network"""
    # Flush any currently active rules
    root.cmd( 'iptables -F' )
    root.cmd( 'iptables -t nat -F' )

    # Instruct the kernel to stop forwarding
    root.cmd( 'sysctl net.ipv4.ip_forward=0' )

def fixNetworkManager( root, intf ):
    """Prevent network-manager from messing with our interface,
       by specifying manual configuration in /etc/network/interfaces
       root: a node in the root namespace (for running commands)
       intf: interface name"""
    cfile = '/etc/network/interfaces'
    line = '\niface %s inet manual\n' % intf
    config = open( cfile ).read()
    if line not in config:
        print '*** Adding', line.strip(), 'to', cfile
        with open( cfile, 'a' ) as f:
            f.write( line )
        # Probably need to restart network-manager to be safe -
        # hopefully this won't disconnect you
        root.cmd( 'service network-manager restart' )

def connectToInternet( network, switch='s1', rootip='10.254', subnet='10.0/8'):
    """Connect the network to the internet
       switch: switch to connect to root namespace
       rootip: address for interface in root namespace
       subnet: Mininet subnet"""
    switch = network.get( switch )
    prefixLen = subnet.split( '/' )[ 1 ]

    # Create a node in root namespace
    root = Node( 'root', inNamespace=False )

    # Prevent network-manager from interfering with our interface
    fixNetworkManager( root, 'root-eth0' )

    # Create link between root NS and switch
    link = network.addLink( root, switch )
    link.intf1.setIP( rootip, prefixLen )

    # Start network that now includes link to root namespace
    network.start()

    # Start NAT and establish forwarding
    startNAT( root )

    # Establish routes from end hosts
    for host in network.hosts:
        host.cmd( 'ip route flush root 0/0' )
        host.cmd( 'route add -net', subnet, 'dev', host.defaultIntf() )
        host.cmd( 'route add default gw', rootip )

    return root



if __name__ == "__main__":
    lg.setLogLevel( 'info')
    #net = TreeNet( depth=1, fanout=4 )
    # Configure and start NATted connectivity
    net = Mininet(listenPort = 6633)

    mycontroller = RemoteController("C0",ip = "192.168.176.132")
    net.addController(mycontroller)

    # Add hosts and switches
    Switch01 = net.addSwitch('s1')
    Switch02 = net.addSwitch('s2')
    Switch03 = net.addSwitch('s3')
    Switch04 = net.addSwitch('s4')
    Switch05 = net.addSwitch('s5')
    Switch06 = net.addSwitch('s6')
    Switch07 = net.addSwitch('s7')
    Switch08 = net.addSwitch('s8')
    Switch09 = net.addSwitch('s9')
    Switch10 = net.addSwitch('s10')
    Switch11 = net.addSwitch('s11')
    Switch12 = net.addSwitch('s12')
    Switch13 = net.addSwitch('s13')
    Switch14 = net.addSwitch('s14')
    Switch15 = net.addSwitch('s15')
    Switch16 = net.addSwitch('s16')
    Switch17 = net.addSwitch('s17')
    Switch18 = net.addSwitch('s18')
    Switch19 = net.addSwitch('s19')
    Switch20 = net.addSwitch('s20')
    Switch21 = net.addSwitch('s21')
    Switch22 = net.addSwitch('s22')
    Switch23 = net.addSwitch('s23')
    Switch24 = net.addSwitch('s24')
    Switch25 = net.addSwitch('s25')
    Switch26 = net.addSwitch('s26')
    Switch27 = net.addSwitch('s27')
    Switch28 = net.addSwitch('s28')
    Switch29 = net.addSwitch('s29')
    Switch30 = net.addSwitch('s30')
    Switch31 = net.addSwitch('s31')
    Switch32 = net.addSwitch('s32')
    Switch33 = net.addSwitch('s33')
    Switch34 = net.addSwitch('s34')
    Switch35 = net.addSwitch('s35')
    Switch36 = net.addSwitch('s36')
    Switch37 = net.addSwitch('s37')
    Switch38 = net.addSwitch('s38')
    Switch39 = net.addSwitch('s39')
    Switch40 = net.addSwitch('s40')
    Switch41 = net.addSwitch('s41')
    Switch42 = net.addSwitch('s42')
    Switch43 = net.addSwitch('s43')
    Switch44 = net.addSwitch('s44')
    Switch45 = net.addSwitch('s45')
    Switch46 = net.addSwitch('s46')
    Switch47 = net.addSwitch('s47')
    Switch48 = net.addSwitch('s48')
    Switch49 = net.addSwitch('s49')
    Switch50 = net.addSwitch('s50')
    Switch51 = net.addSwitch('s51')
    Switch52 = net.addSwitch('s52')
    Switch53 = net.addSwitch('s53')
    Switch54 = net.addSwitch('s54')
    Switch55 = net.addSwitch('s55')
    Switch56 = net.addSwitch('s56')
    Switch57 = net.addSwitch('s57')
    Switch58 = net.addSwitch('s58')
    Switch59 = net.addSwitch('s59')
    Switch60 = net.addSwitch('s60')
    Switch61 = net.addSwitch('s61')
    Switch62 = net.addSwitch('s62')
    Switch63 = net.addSwitch('s63')
    Switch64 = net.addSwitch('s64')
    Switch65 = net.addSwitch('s65')
    Switch66 = net.addSwitch('s66')


    Host01 = net.addHost('h1')
    Host02 = net.addHost('h2')
    Host03 = net.addHost('h3')
    Host04 = net.addHost('h4')
    Host05 = net.addHost('h5')
    Host06 = net.addHost('h6')
    Host07 = net.addHost('h7')
    Host08 = net.addHost('h8')
    Host09 = net.addHost('h9')
    Host10 = net.addHost('h10')
    Host11 = net.addHost('h11')
    Host12 = net.addHost('h12')
    Host13 = net.addHost('h13')
    Host14 = net.addHost('h14')
    Host15 = net.addHost('h15')
    Host16 = net.addHost('h16')
    Host17 = net.addHost('h17')
    Host18 = net.addHost('h18')
    Host19 = net.addHost('h19')
    Host20 = net.addHost('h20')
    Host21 = net.addHost('h21')
    Host22 = net.addHost('h22')
    Host23 = net.addHost('h23')
    Host24 = net.addHost('h24')
    Host25 = net.addHost('h25')
    Host26 = net.addHost('h26')
    Host27 = net.addHost('h27')
    Host28 = net.addHost('h28')
    Host29 = net.addHost('h29')
    Host30 = net.addHost('h30')
    Host31 = net.addHost('h31')
    Host32 = net.addHost('h32')
    Host33 = net.addHost('h33')
    Host34 = net.addHost('h34')
    Host35 = net.addHost('h35')
    Host36 = net.addHost('h36')
    Host37 = net.addHost('h37')
    Host38 = net.addHost('h38')
    Host39 = net.addHost('h39')
    Host40 = net.addHost('h40')
    Host41 = net.addHost('h41')
    Host42 = net.addHost('h42')
    Host43 = net.addHost('h43')
    Host44 = net.addHost('h44')
    Host45 = net.addHost('h45')
    Host46 = net.addHost('h46')
    Host47 = net.addHost('h47')
    Host48 = net.addHost('h48')
    Host49 = net.addHost('h49')
    Host50 = net.addHost('h50')
    Host51 = net.addHost('h51')
    Host52 = net.addHost('h52')
    Host53 = net.addHost('h53')
    Host54 = net.addHost('h54')
    Host55 = net.addHost('h55')
    Host56 = net.addHost('h56')
    Host57 = net.addHost('h57')
    Host58 = net.addHost('h58')
    Host59 = net.addHost('h59')
    Host60 = net.addHost('h60')
    Host61 = net.addHost('h61')
    Host62 = net.addHost('h62')
    Host63 = net.addHost('h63')
    Host64 = net.addHost('h64')
    Host65 = net.addHost('h65')
    Host66 = net.addHost('h66')
    Host67 = net.addHost('h67')
    Host68 = net.addHost('h68')
    Host69 = net.addHost('h69')
    Host70 = net.addHost('h70')
    Host71 = net.addHost('h71')
    Host72 = net.addHost('h72')
    Host73 = net.addHost('h73')
    Host74 = net.addHost('h74')
    Host75 = net.addHost('h75')
    Host76 = net.addHost('h76')
    Host77 = net.addHost('h77')
    Host78 = net.addHost('h78')
    Host79 = net.addHost('h79')
    Host80 = net.addHost('h80')
    Host81 = net.addHost('h81')
    Host82 = net.addHost('h82')
    Host83 = net.addHost('h83')
    Host84 = net.addHost('h84')
    Host85 = net.addHost('h85')
    Host86 = net.addHost('h86')
    Host87 = net.addHost('h87')
    Host88 = net.addHost('h88')
    Host89 = net.addHost('h89')
    Host90 = net.addHost('h90')
    Host91 = net.addHost('h91')
    Host92 = net.addHost('h92')
    Host93 = net.addHost('h93')
    Host94 = net.addHost('h94')
    Host95 = net.addHost('h95')
    Host96 = net.addHost('h96')
    Host97 = net.addHost('h97')
    Host98 = net.addHost('h98')
    Host99 = net.addHost('h99')
    Host100 = net.addHost('h100')
    Host101 = net.addHost('h101')
    Host102 = net.addHost('h102')
    Host103 = net.addHost('h103')
    Host104 = net.addHost('h104')
    Host105 = net.addHost('h105')
    Host106 = net.addHost('h106')
    Host107 = net.addHost('h107')
    Host108 = net.addHost('h108')
    Host109 = net.addHost('h109')
    Host110 = net.addHost('h110')
    Host111 = net.addHost('h111')
    Host112 = net.addHost('h112')
    Host113 = net.addHost('h113')
    Host114 = net.addHost('h114')
    Host115 = net.addHost('h115')
    Host116 = net.addHost('h116')
    Host117 = net.addHost('h117')
    Host118 = net.addHost('h118')
    Host119 = net.addHost('h119')
    Host120 = net.addHost('h120')
    Host121 = net.addHost('h121')
    Host122 = net.addHost('h122')
    Host123 = net.addHost('h123')
    Host124 = net.addHost('h124')
    Host125 = net.addHost('h125')
    Host126 = net.addHost('h126')
    Host127 = net.addHost('h127')
    Host128 = net.addHost('h128')
    Host129 = net.addHost('h129')
    Host130 = net.addHost('h130')
    Host131 = net.addHost('h131')
    Host132 = net.addHost('h132')
    Host133 = net.addHost('h133')
    Host134 = net.addHost('h134')
    Host135 = net.addHost('h135')
    Host136 = net.addHost('h136')
    Host137 = net.addHost('h137')
    Host138 = net.addHost('h138')
    Host139 = net.addHost('h139')
    Host140 = net.addHost('h140')
	Host141 = net.addHost('h141')
    Host142 = net.addHost('h142')
    Host143 = net.addHost('h143')
    Host144 = net.addHost('h144')
    Host145 = net.addHost('h145')
    Host146 = net.addHost('h146')
    Host147 = net.addHost('h147')
    Host148 = net.addHost('h148')
    Host149 = net.addHost('h149')
    Host150 = net.addHost('h150')
    Host151 = net.addHost('h151')
    Host152 = net.addHost('h152')
    Host153 = net.addHost('h153')
    Host154 = net.addHost('h154')
    Host155 = net.addHost('h155')
    Host156 = net.addHost('h156')
    Host157 = net.addHost('h157')
    Host158 = net.addHost('h158')
    Host159 = net.addHost('h159')
    Host160 = net.addHost('h160')
	Host161 = net.addHost('h161')
    Host162 = net.addHost('h162')
    Host163 = net.addHost('h163')
    Host164 = net.addHost('h164')
    Host165 = net.addHost('h165')
    Host166 = net.addHost('h166')
    Host167 = net.addHost('h167')
    Host168 = net.addHost('h168')
    Host169 = net.addHost('h169')
    Host170 = net.addHost('h170')
    Host171 = net.addHost('h171')
    Host172 = net.addHost('h172')
    Host173 = net.addHost('h173')
    Host174 = net.addHost('h174')
    Host175 = net.addHost('h175')
    Host176 = net.addHost('h176')
    Host177 = net.addHost('h177')
    Host178 = net.addHost('h178')
    Host179 = net.addHost('h179')
    Host180 = net.addHost('h180')
	Host181 = net.addHost('h181')
    Host182 = net.addHost('h182')
    Host183 = net.addHost('h183')
    Host184 = net.addHost('h184')
    Host185 = net.addHost('h185')
    Host186 = net.addHost('h186')
    Host187 = net.addHost('h187')
    Host188 = net.addHost('h188')
    Host189 = net.addHost('h189')
    Host190 = net.addHost('h190')
    Host191 = net.addHost('h191')
    Host192 = net.addHost('h192')
    Host193 = net.addHost('h193')
    Host194 = net.addHost('h194')
    Host195 = net.addHost('h195')
    Host196 = net.addHost('h196')
    Host197 = net.addHost('h197')
    Host198 = net.addHost('h198')
    Host199 = net.addHost('h199')
    Host200 = net.addHost('h200')
    Host201 = net.addHost('h201')
    Host202 = net.addHost('h202')
    Host203 = net.addHost('h203')
    Host204 = net.addHost('h204')
    Host205 = net.addHost('h205')
    Host206 = net.addHost('h206')
    Host207 = net.addHost('h207')
    Host208 = net.addHost('h208')
    Host209 = net.addHost('h209')
    Host210 = net.addHost('h210')
    Host211 = net.addHost('h211')
    Host212 = net.addHost('h212')
    Host213 = net.addHost('h213')
    Host214 = net.addHost('h214')
    Host215 = net.addHost('h215')
    Host216 = net.addHost('h216')
    Host217 = net.addHost('h217')
    Host218 = net.addHost('h218')
    Host219 = net.addHost('h219')
    Host220 = net.addHost('h220')
    Host221 = net.addHost('h221')
    Host222 = net.addHost('h222')
    Host223 = net.addHost('h223')
    Host224 = net.addHost('h224')
    Host225 = net.addHost('h225')
    Host226 = net.addHost('h226')
    Host227 = net.addHost('h227')
    Host228 = net.addHost('h228')
    Host229 = net.addHost('h229')
    Host230 = net.addHost('h230')
    Host231 = net.addHost('h231')
    Host232 = net.addHost('h232')
    Host233 = net.addHost('h233')
    Host234 = net.addHost('h234')
    Host235 = net.addHost('h235')
    Host236 = net.addHost('h236')
    Host237 = net.addHost('h237')
    Host238 = net.addHost('h238')
    Host239 = net.addHost('h239')
    Host240 = net.addHost('h240')


    # Add links
    net.addLink(Switch01,Switch02)
    net.addLink(Switch01,Switch03)
    net.addLink(Switch01,Switch04)
    net.addLink(Switch01,Switch05)
    net.addLink(Switch01,Switch06)
    net.addLink(Switch01,Switch07)
    net.addLink(Switch02,Switch08)
    net.addLink(Switch02,Switch09)
    net.addLink(Switch02,Switch10)
    net.addLink(Switch02,Switch11)
    net.addLink(Switch02,Switch12)
    net.addLink(Switch04,Switch13)
    net.addLink(Switch04,Switch14)
    net.addLink(Switch04,Switch15)
    net.addLink(Switch04,Switch16)
    net.addLink(Switch04,Switch17)
    net.addLink(Switch04,Switch18)
    net.addLink(Switch05,Switch19)
    net.addLink(Switch05,Switch20)
    net.addLink(Switch06,Switch21)
    net.addLink(Switch06,Switch22)
    net.addLink(Switch06,Switch23)
    net.addLink(Switch06,Switch24)
    net.addLink(Switch06,Switch25)
    net.addLink(Switch06,Switch26)
    net.addLink(Switch08,Switch27)
    net.addLink(Switch08,Switch28)
    net.addLink(Switch09,Switch29)
    net.addLink(Switch09,Switch30)
    net.addLink(Switch10,Switch31)
    net.addLink(Switch10,Switch32)
    net.addLink(Switch11,Switch33)
    net.addLink(Switch11,Switch34)
    net.addLink(Switch12,Switch35)
    net.addLink(Switch12,Switch36)
    net.addLink(Switch12,Switch37)
    net.addLink(Switch12,Switch38)
    net.addLink(Switch13,Switch39)
    net.addLink(Switch13,Switch40)
    net.addLink(Switch14,Switch41)
    net.addLink(Switch14,Switch42)
    net.addLink(Switch15,Switch43)
    net.addLink(Switch15,Switch44)
    net.addLink(Switch16,Switch45)
    net.addLink(Switch16,Switch46)
    net.addLink(Switch17,Switch47)
    net.addLink(Switch17,Switch48)
    net.addLink(Switch18,Switch49)
    net.addLink(Switch18,Switch50)
    net.addLink(Switch19,Switch51)
    net.addLink(Switch19,Switch52)
    net.addLink(Switch20,Switch53)
    net.addLink(Switch20,Switch54)
    net.addLink(Switch21,Switch55)
    net.addLink(Switch21,Switch56)
    net.addLink(Switch22,Switch57)
    net.addLink(Switch22,Switch58)
    net.addLink(Switch23,Switch59)
    net.addLink(Switch23,Switch60)
    net.addLink(Switch24,Switch61)
    net.addLink(Switch24,Switch62)
    net.addLink(Switch25,Switch63)
    net.addLink(Switch25,Switch64)
    net.addLink(Switch26,Switch65)
    net.addLink(Switch26,Switch66)
    net.addLink(Switch27,Host01)
    net.addLink(Switch27,Host02)
    net.addLink(Switch27,Host03)
    net.addLink(Switch28,Host04)
    net.addLink(Switch28,Host05)
    net.addLink(Switch28,Host06)
    net.addLink(Switch28,Host07)
    net.addLink(Switch28,Host08)
    net.addLink(Switch28,Host09)
    net.addLink(Switch28,Host10)
    net.addLink(Switch29,Host11)
    net.addLink(Switch29,Host12)
    net.addLink(Switch29,Host13)
    net.addLink(Switch30,Host14)
    net.addLink(Switch30,Host15)
    net.addLink(Switch30,Host16)
    net.addLink(Switch30,Host17)
    net.addLink(Switch30,Host18)
    net.addLink(Switch30,Host19)
    net.addLink(Switch30,Host20)
    net.addLink(Switch31,Host21)
    net.addLink(Switch31,Host22)
    net.addLink(Switch31,Host23)
    net.addLink(Switch32,Host24)
    net.addLink(Switch32,Host25)
    net.addLink(Switch32,Host26)
    net.addLink(Switch32,Host27)
    net.addLink(Switch32,Host28)
    net.addLink(Switch32,Host29)
    net.addLink(Switch32,Host30)
    net.addLink(Switch33,Host31)
    net.addLink(Switch33,Host32)
    net.addLink(Switch33,Host33)
    net.addLink(Switch34,Host34)
    net.addLink(Switch34,Host35)
    net.addLink(Switch34,Host36)
    net.addLink(Switch34,Host37)
    net.addLink(Switch34,Host38)
    net.addLink(Switch34,Host39)
    net.addLink(Switch34,Host40)
    net.addLink(Switch35,Host41)
    net.addLink(Switch35,Host42)
    net.addLink(Switch35,Host43)
    net.addLink(Switch36,Host44)
    net.addLink(Switch36,Host45)
    net.addLink(Switch36,Host46)
    net.addLink(Switch36,Host47)
    net.addLink(Switch36,Host48)
    net.addLink(Switch36,Host49)
    net.addLink(Switch36,Host50)
    net.addLink(Switch37,Host51)
    net.addLink(Switch37,Host52)
    net.addLink(Switch37,Host53)
    net.addLink(Switch38,Host54)
    net.addLink(Switch38,Host55)
    net.addLink(Switch38,Host56)
    net.addLink(Switch38,Host57)
    net.addLink(Switch38,Host58)
    net.addLink(Switch38,Host59)
    net.addLink(Switch38,Host60)
    net.addLink(Switch38,Host61)
    net.addLink(Switch38,Host62)
    net.addLink(Switch38,Host63)
    net.addLink(Switch38,Host64)
    net.addLink(Switch38,Host65)
    net.addLink(Switch38,Host66)
    net.addLink(Switch38,Host67)
    net.addLink(Switch38,Host68)
    net.addLink(Switch38,Host69)
    net.addLink(Switch38,Host70)
    net.addLink(Switch39,Host71)
    net.addLink(Switch39,Host72)
    net.addLink(Switch39,Host73)
    net.addLink(Switch40,Host74)
    net.addLink(Switch40,Host75)
    net.addLink(Switch40,Host76)
    net.addLink(Switch40,Host77)
    net.addLink(Switch40,Host78)
    net.addLink(Switch40,Host79)
    net.addLink(Switch40,Host80)
    net.addLink(Switch41,Host81)
    net.addLink(Switch41,Host82)
    net.addLink(Switch41,Host83)
    net.addLink(Switch42,Host84)
    net.addLink(Switch42,Host85)
    net.addLink(Switch42,Host86)
    net.addLink(Switch42,Host87)
    net.addLink(Switch42,Host88)
    net.addLink(Switch42,Host89)
    net.addLink(Switch42,Host90)
    net.addLink(Switch43,Host91)
    net.addLink(Switch43,Host92)
    net.addLink(Switch43,Host93)
    net.addLink(Switch44,Host94)
    net.addLink(Switch44,Host95)
    net.addLink(Switch44,Host96)
    net.addLink(Switch44,Host97)
    net.addLink(Switch44,Host98)
    net.addLink(Switch44,Host99)
    net.addLink(Switch44,Host100)
    net.addLink(Switch45,Host101)
    net.addLink(Switch45,Host102)
    net.addLink(Switch45,Host103)
    net.addLink(Switch46,Host104)
    net.addLink(Switch46,Host105)
    net.addLink(Switch46,Host106)
    net.addLink(Switch46,Host107)
    net.addLink(Switch46,Host108)
    net.addLink(Switch46,Host109)
    net.addLink(Switch46,Host110)
    net.addLink(Switch47,Host111)
    net.addLink(Switch47,Host112)
    net.addLink(Switch47,Host113)
    net.addLink(Switch48,Host114)
    net.addLink(Switch48,Host115)
    net.addLink(Switch48,Host116)
    net.addLink(Switch48,Host117)
    net.addLink(Switch48,Host118)
    net.addLink(Switch48,Host119)
    net.addLink(Switch48,Host120)
    net.addLink(Switch49,Host121)
    net.addLink(Switch49,Host122)
    net.addLink(Switch49,Host123)
    net.addLink(Switch50,Host124)
    net.addLink(Switch50,Host125)
    net.addLink(Switch50,Host126)
    net.addLink(Switch50,Host127)
    net.addLink(Switch50,Host128)
    net.addLink(Switch50,Host129)
    net.addLink(Switch50,Host130)
    net.addLink(Switch51,Host131)
    net.addLink(Switch51,Host132)
    net.addLink(Switch51,Host133)
    net.addLink(Switch52,Host134)
    net.addLink(Switch52,Host135)
    net.addLink(Switch52,Host136)
    net.addLink(Switch52,Host137)
    net.addLink(Switch52,Host138)
    net.addLink(Switch52,Host139)
    net.addLink(Switch52,Host140)
    net.addLink(Switch53,Host141)
    net.addLink(Switch53,Host142)
    net.addLink(Switch53,Host143)
    net.addLink(Switch54,Host144)
    net.addLink(Switch54,Host145)
    net.addLink(Switch54,Host146)
    net.addLink(Switch54,Host147)
    net.addLink(Switch54,Host148)
    net.addLink(Switch54,Host149)
    net.addLink(Switch54,Host150)
    net.addLink(Switch55,Host151)
    net.addLink(Switch55,Host152)
    net.addLink(Switch55,Host153)
    net.addLink(Switch56,Host154)
    net.addLink(Switch56,Host155)
    net.addLink(Switch56,Host156)
    net.addLink(Switch56,Host157)
    net.addLink(Switch56,Host158)
    net.addLink(Switch56,Host159)
    net.addLink(Switch56,Host160)
    net.addLink(Switch57,Host161)
    net.addLink(Switch57,Host162)
    net.addLink(Switch57,Host163)
    net.addLink(Switch58,Host164)
    net.addLink(Switch58,Host165)
    net.addLink(Switch58,Host166)
    net.addLink(Switch58,Host167)
    net.addLink(Switch58,Host168)
    net.addLink(Switch58,Host169)
    net.addLink(Switch58,Host170)
    net.addLink(Switch59,Host171)
    net.addLink(Switch59,Host172)
    net.addLink(Switch59,Host173)
    net.addLink(Switch60,Host174)
    net.addLink(Switch60,Host175)
    net.addLink(Switch60,Host176)
    net.addLink(Switch60,Host177)
    net.addLink(Switch60,Host178)
    net.addLink(Switch60,Host179)
    net.addLink(Switch60,Host180)
    net.addLink(Switch61,Host181)
    net.addLink(Switch61,Host182)
    net.addLink(Switch61,Host183)
    net.addLink(Switch62,Host184)
    net.addLink(Switch62,Host185)
    net.addLink(Switch62,Host186)
    net.addLink(Switch62,Host187)
    net.addLink(Switch62,Host188)
    net.addLink(Switch62,Host189)
    net.addLink(Switch62,Host190)
    net.addLink(Switch63,Host191)
    net.addLink(Switch63,Host192)
    net.addLink(Switch63,Host193)
    net.addLink(Switch64,Host194)
    net.addLink(Switch64,Host195)
    net.addLink(Switch64,Host196)
    net.addLink(Switch64,Host197)
    net.addLink(Switch64,Host198)
    net.addLink(Switch64,Host199)
    net.addLink(Switch64,Host200)
    net.addLink(Switch65,Host201)
    net.addLink(Switch65,Host202)
    net.addLink(Switch65,Host203)
    net.addLink(Switch66,Host204)
    net.addLink(Switch66,Host205)
    net.addLink(Switch66,Host206)
    net.addLink(Switch66,Host207)
    net.addLink(Switch66,Host208)
    net.addLink(Switch66,Host209)
    net.addLink(Switch66,Host210)
    net.addLink(Switch03,Host211)
    net.addLink(Switch03,Host212)
    net.addLink(Switch03,Host213)
    net.addLink(Switch03,Host214)
    net.addLink(Switch03,Host215)
    net.addLink(Switch07,Host216)
    net.addLink(Switch07,Host217)
    net.addLink(Switch07,Host218)
    net.addLink(Switch07,Host219)
    net.addLink(Switch07,Host220)
    net.addLink(Switch07,Host221)
    net.addLink(Switch07,Host222)
    net.addLink(Switch07,Host223)
    net.addLink(Switch07,Host224)
    net.addLink(Switch07,Host225)
    net.addLink(Switch07,Host226)
    net.addLink(Switch07,Host227)
    net.addLink(Switch07,Host228)
    net.addLink(Switch07,Host229)
    net.addLink(Switch07,Host230)
    net.addLink(Switch07,Host231)
    net.addLink(Switch07,Host232)
    net.addLink(Switch07,Host233)
    net.addLink(Switch07,Host234)
    net.addLink(Switch07,Host235)
    net.addLink(Switch07,Host236)
    net.addLink(Switch07,Host237)
    net.addLink(Switch07,Host238)
    net.addLink(Switch07,Host239)
    net.addLink(Switch07,Host240)




    rootnode = connectToInternet( net )
    print "*** Hosts are running and should have internet connectivity"
    print "*** Type 'exit' or control-D to shut down network"
    CLI( net )
    stopNAT( rootnode )
    net.stop()
